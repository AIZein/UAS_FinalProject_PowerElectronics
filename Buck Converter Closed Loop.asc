Version 4
SHEET 1 880 756
WIRE 320 -224 32 -224
WIRE 320 -144 320 -224
WIRE 272 -64 112 -64
WIRE 320 16 320 -48
WIRE 320 16 272 16
WIRE 416 16 320 16
WIRE 560 16 496 16
WIRE 688 16 560 16
WIRE 816 16 688 16
WIRE 112 48 112 16
WIRE 272 48 272 16
WIRE 272 48 112 48
WIRE 688 112 688 16
WIRE 32 128 32 -224
WIRE 320 128 320 16
WIRE 560 128 560 16
WIRE 32 288 32 208
WIRE 320 288 320 192
WIRE 320 288 32 288
WIRE 560 288 560 192
WIRE 560 288 320 288
WIRE 688 288 688 192
WIRE 688 288 560 288
WIRE 720 288 688 288
WIRE 720 336 720 288
WIRE 288 416 256 416
WIRE 416 416 352 416
WIRE 496 416 448 416
WIRE 256 464 256 416
WIRE 256 464 160 464
WIRE 816 464 816 16
WIRE 816 464 688 464
WIRE 96 480 0 480
WIRE 496 480 496 416
WIRE 624 480 496 480
WIRE 256 496 160 496
WIRE 816 496 688 496
WIRE 256 560 256 496
WIRE 416 560 256 560
WIRE 496 560 496 480
WIRE 496 560 448 560
WIRE 128 576 0 576
WIRE 816 576 816 496
WIRE 128 608 128 576
WIRE 816 720 816 656
WIRE 128 736 128 688
FLAG 816 720 0
FLAG 128 736 0
FLAG 0 480 comp_out
FLAG 720 336 0
FLAG 0 576 Tri
SYMBOL voltage 32 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL ind 400 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 20µ
SYMBOL cap 544 128 R0
SYMATTR InstName C1
SYMATTR Value 20µ
SYMBOL res 672 96 R0
SYMATTR InstName R1
SYMATTR Value 2
SYMBOL sub 736 480 R180
SYMATTR InstName X1
SYMBOL voltage 816 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL Gain 496 416 R180
WINDOW 0 65 48 Bottom 2
WINDOW 39 -29 48 Bottom 2
SYMATTR InstName X3
SYMATTR SpiceLine k = {1/(R1*C)}
SYMBOL Gain 496 560 R180
WINDOW 0 70 -20 Bottom 2
WINDOW 39 -41 -20 Bottom 2
SYMATTR InstName X2
SYMATTR SpiceLine k = {R2/R1}
SYMBOL Integrate 304 464 R180
WINDOW 0 -10 112 Bottom 2
SYMATTR InstName X4
SYMBOL Adder 144 480 R180
SYMATTR InstName X5
SYMBOL voltage 128 592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-10 10 0 {1/(2*Fs)} {1/(2*Fs)} 1n {1/(Fs)})
SYMBOL bv 112 -80 R0
WINDOW 3 76 -76 VRight 2
SYMATTR InstName B1
SYMATTR Value V=if(V(Tri)<V(Comp_out),15,0)
SYMBOL schottky 336 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MBR735
SYMBOL nmos 272 -144 R0
SYMATTR InstName M1
SYMATTR Value AOB66916L
TEXT -32 336 Left 2 !.param R1 = 1k\n.param R2 = 2.7k\n.param C = 20n\n.param Fs = 100k
TEXT -224 344 Left 2 !.tran 10m uic
